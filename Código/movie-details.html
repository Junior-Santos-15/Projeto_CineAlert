<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="titulo-detalhe">Detalhes do Filme - CineAlert</title>
    <link rel="icon" href="icone.png">
    <link rel="stylesheet" href="css/movie-details.css">
    <!-- Estilos do Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <style>
        #map {
            height: 300px;
            /* Define a altura do mapa */
            margin: 20px 0;
            /* Adiciona espa√ßo ao redor do mapa */
        }
    </style>
</head>

<body>
    <header class="header">
        <a href="index.html"><button id="list-favo">‚¨Ö Adicionar aos Favoritos</button></a>
        <a href="index.html">
            <h1 class="logo">üçø CineAlert</h1>
        </a>
        <footer class="footer">
        <a href="index.html"><button id="home-btn">üè†Home</button></a>
        <a href="lista_desejos.html"><button id="favorites-btn">‚ù§Ô∏è Favoritos</button></a>
        <a href="configuracoes.html"><button id="settings-btn">‚öôÔ∏è Configura√ß√µes</button></a>
        </footer>
    </header>

    <div class="details">
        <img id="movie-img" src="" alt="Imagem do Filme">
        <h2 id="movie-name">Nome do Filme</h2>
        <!-- Sistema de Avalia√ß√£o por Estrelas -->
        <div id="star-rating">
            <span class="star" data-value="1">&#9733;</span>
            <span class="star" data-value="2">&#9733;</span>
            <span class="star" data-value="3">&#9733;</span>
            <span class="star" data-value="4">&#9733;</span>
            <span class="star" data-value="5">&#9733;</span>
        </div>
        <style>
            /* Centraliza o container das estrelas */
            #star-rating {
                font-size: 2rem;
                color: #ccc;
                /* Cor das estrelas inativas */
                cursor: pointer;
                display: flex;
                justify-content: center;
                /* Centraliza as estrelas horizontalmente */
                gap: 5px;
                /* Espa√ßamento entre as estrelas */
                margin: 20px 0;
                /* Adiciona um pouco de espa√ßo acima e abaixo */
            }

            /* Estilo das estrelas selecionadas */
            #star-rating .star.selected {
                color: #ffcc00;
                /* Cor das estrelas selecionadas */
            }

            /* Alinhamento do resultado da avalia√ß√£o */
            #rating-result {
                text-align: center;
                /* Centraliza o texto */
                margin-top: 10px;
                font-size: 1.2rem;
                color: #333;
            }
        </style>
        <p><strong>Sinopse:</strong> <span id="movie-synopsis">Sinopse do filme...</span></p>
        <p><strong>G√™nero:</strong> <span id="movie-genre">G√™nero</span></p>
        <p><strong>Data de Lan√ßamento:</strong> <span id="movie-release-date">Data de Lan√ßamento</span></p>

        <!-- Se√ß√£o do Trailer -->
        <div id="movie-trailer">
            <button id="assiste-trailer" onclick="playTrailer()">Assistir Trailer</button>
        </div>

        <h3 id="cine-next">Cinemas Pr√≥ximos</h3>
        <div id="map"></div> <!-- Adicionado para o mapa -->
        <ul id="movie-cinemas">
            <!-- Cinemas ser√£o listados aqui -->
        </ul>
    </div>

    <!-- Se√ß√£o de Coment√°rios -->
    <div class="comments-section">
        <h3 id="comenta-filme">Coment√°rios</h3>
        <div id="comments-list">
            <!-- Coment√°rios ser√£o listados aqui -->
        </div>

        <textarea id="comment-input" placeholder="Escreva seu coment√°rio..." rows="4" cols="50"></textarea><br>
        <button id="submit-comment" onclick="submitComment()">Enviar Coment√°rio</button>
    </div>

    </div>

    <!-- |||FUN√á√ïES||| -->
    <script>
        // Fun√ß√£o para exibir os coment√°rios
        function displayComments() {
            const movieId = getMovieFromURL();  // Pega o ID do filme da URL
            const commentsList = document.getElementById('comments-list');

            // Pega os coment√°rios armazenados no localStorage para o filme espec√≠fico
            const comments = JSON.parse(localStorage.getItem(`comments_${movieId}`)) || [];

            // Limpar a lista de coment√°rios
            commentsList.innerHTML = '';

            // Exibir todos os coment√°rios
            comments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.classList.add('comment');
                commentElement.innerHTML = `
            <p>${comment.text}</p>
            <small><strong style="color: #003366;">${comment.date}</strong></small>`;
                commentsList.appendChild(commentElement);
            });
        }

        // Fun√ß√£o para enviar um coment√°rio
        function submitComment() {
            const movieId = getMovieFromURL();  // Pega o ID do filme da URL
            const commentInput = document.getElementById('comment-input');
            const commentText = commentInput.value.trim();

            if (commentText === '') {
                alert('Por favor, escreva um coment√°rio!');
                return;
            }

            // Criar um novo coment√°rio com data e texto
            const comment = {
                text: commentText,
                date: new Date().toLocaleString()
            };

            // Obter os coment√°rios armazenados para este filme
            const comments = JSON.parse(localStorage.getItem(`comments_${movieId}`)) || [];
            comments.push(comment);

            // Salvar os coment√°rios no localStorage, usando a chave do filme
            localStorage.setItem(`comments_${movieId}`, JSON.stringify(comments));

            // Limpar o campo de coment√°rio e exibir os coment√°rios atualizados
            commentInput.value = '';
            displayComments();
        }

        // Chamar a fun√ß√£o para exibir os coment√°rios quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', displayComments);

        // Configura√ß√£o do mapa Leaflet
        document.addEventListener('DOMContentLoaded', function () {
            const map = L.map('map').setView([-12.9714, -38.5014], 13); // Coordenadas de Salvador, Bahia
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);

            // Adicionar marcador para um cinema (exemplo)
            L.marker([-12.9714, -38.5014]).addTo(map)
                .bindPopup('Exemplo de Cinema em Salvador')
                .openPopup();
        });
    </script>

  

    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/movie-details.js"></script>
    <script src="js/configuracoes.js"></script>
    <script src="js/theme.js" defer></script>
</body>

</html>