<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil De Usu√°rio - CineAlert</title>
  <link rel="icon" href="icone.png">
  <link rel="stylesheet" href="css/gerenciar_conta.css">
  <link rel="stylesheet" href="css/lista_desejos.css">
  <style>
    /* Estilo para o √≠cone de olho */
    .eye-icon {
      cursor: pointer;
      margin-left: 10px;
      font-size: 1.5em;
    }
  </style>
</head>
<body>
  <header class="header">
    <a href="index.html"><button>‚¨Ö Voltar</button></a>
    <h1 class="logo">Perfil de Usu√°rio</h1>
    <footer class="footer">
        <a href="index.html"><button>üè† Home</button></a>
        <a href="configuracoes.html"><button id="settings-btn">‚öôÔ∏è Configura√ß√µes</button></a>

    </footer>
  </header>

  <div id="user-info">
    <h2 id="dados-user">Dados Do Usu√°rio: </h2>
    <p><strong></strong> <span id="avatar-display"></span></p>
    <p><strong>Nome de usu√°rio:</strong> <span id="username-display"></span></p>
    <p><strong>E-mail:</strong> <span id="email-display"></span></p>
    <p><strong>Telefone:</strong> <span id="phone-display"></span></p>
    <p><strong>Sexo:</strong> <span id="sex-display"></span></p>
    <p><strong>Senha:</strong> 
      <input type="password" id="password-display" readonly> <!-- Campo de senha readonly -->
      <span class="eye-icon" id="toggle-password" onclick="togglePassword()">üôà</span> <!-- √çcone de olho -->
    </p>
  </div>

  <div id="actionbotao">
    <button id="delete" onclick="deleteAccount()">Excluir Conta</button>
    <button id="modify-phone" onclick="modifyPhone()">Modificar Telefone</button>
    <button id="change-password" onclick="changePassword()">Trocar Senha</button>
    <button id="logout" onclick="logout()">Desconectar</button>
  </div>

  <h3 id="fav">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏èFavoritos‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</h3>
  <div class="movie-carousel" id="wishlist-container">
    <!-- Os filmes ser√£o exibidos aqui -->
  </div>

  <button id="clear-wishlist">Limpar Lista de Desejos</button>

  <script>
    // Exibir os dados do usu√°rio
    window.onload = function() {
      const username = localStorage.getItem('username');
      
      if (!username) {
        // Se n√£o houver nome de usu√°rio no localStorage, redireciona para a p√°gina de login
        window.location.href = 'login.html';
      } else {
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const user = users.find(user => user.username === username);
        
        if (user) {
          document.getElementById('username-display').textContent = user.username || 'Usu√°rio n√£o encontrado';
          document.getElementById('email-display').textContent = user.email || 'E-mail n√£o encontrado';
          document.getElementById('phone-display').textContent = user.phone || 'Telefone n√£o encontrado';
          document.getElementById('sex-display').textContent = user.sex || 'Sexo n√£o encontrado';
          document.getElementById('password-display').value = user.password || 'Senha n√£o encontrada'; // Exibe a senha oculta por padr√£o
        } else {
          document.getElementById('username-display').textContent = 'Usu√°rio n√£o encontrado';
        }
      }
    };

    // Fun√ß√£o para alternar a visibilidade da senha e os √≠cones
    function togglePassword() {
      const passwordField = document.getElementById('password-display');
      const eyeIcon = document.getElementById('toggle-password');
      const currentType = passwordField.type;
      
      if (currentType === 'password') {
        passwordField.type = 'text';  // Exibe a senha
        eyeIcon.textContent = 'üôâ';  // Troca para √≠cone de olho fechado
      } else {
        passwordField.type = 'password';  // Oculta a senha
        eyeIcon.textContent = 'üôà';  // Troca para √≠cone de olho aberto
      }
    }

    // Fun√ß√£o para excluir a conta
    function deleteAccount() {
      if (confirm('Tem certeza que deseja excluir sua conta? Esta a√ß√£o n√£o pode ser desfeita.')) {
        // Recupera a lista de usu√°rios
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const username = localStorage.getItem('username');
        
        // Filtra o usu√°rio a ser exclu√≠do
        const updatedUsers = users.filter(user => user.username !== username);

        // Salva a lista de usu√°rios atualizada sem o usu√°rio exclu√≠do
        localStorage.setItem('users', JSON.stringify(updatedUsers));

        // Remove todos os dados do usu√°rio do localStorage
        localStorage.removeItem('username');
        localStorage.removeItem('email');
        localStorage.removeItem('phone');
        localStorage.removeItem('sex');
        
        alert('Sua conta foi exclu√≠da!');
        
        // Redireciona para a p√°gina principal
        window.location.href = 'index.html';
      }
    }

    // Fun√ß√£o para modificar o telefone do usu√°rio
    function modifyPhone() {
      const newPhone = prompt ('Digite o novo n√∫mero de telefone:');
      
      if (newPhone) {
        const username = localStorage.getItem('username');
        const users = JSON.parse(localStorage.getItem('users')) || [];
        
        const user = users.find(user => user.username === username);
        
        if (user) {
          user.phone = newPhone; // Atualiza o telefone do usu√°rio
          localStorage.setItem('users', JSON.stringify(users)); // Salva a lista atualizada de usu√°rios
          document.getElementById('phone-display').textContent = newPhone; // Atualiza a exibi√ß√£o do telefone na tela
          alert('Telefone modificado com sucesso!');
        } else {
          alert('Usu√°rio n√£o encontrado!');
        }
      } else {
        alert('Voc√™ n√£o digitou um n√∫mero de telefone v√°lido.');
      }
    }

    // Fun√ß√£o para alterar a senha
    function changePassword() {
      const newPassword = prompt('Digite a nova senha:');
      
      if (newPassword && newPassword.length >= 6) {
        const username = localStorage.getItem('username');
        const users = JSON.parse(localStorage.getItem('users')) || [];
        
        const user = users.find(user => user.username === username);
        
        if (user) {
          user.password = newPassword; // Atualiza a senha do usu√°rio
          localStorage.setItem('users', JSON.stringify(users)); // Salva a lista atualizada de usu√°rios
          document.getElementById('password-display').value = newPassword; // Atualiza a exibi√ß√£o da senha na tela
          alert('Senha alterada com sucesso!');
        } else {
          alert('Usu√°rio n√£o encontrado!');
        }
      } else {
        alert('A senha deve ter pelo menos 6 caracteres!');
      }
    }

    // Fun√ß√£o para se desconectar

    function logout() {
  localStorage.removeItem('username');
  localStorage.removeItem('email');
  localStorage.removeItem('phone');
  localStorage.removeItem('sex');
  alert('Voc√™ foi desconectado!');
  window.location.href = 'login.html'; // Redireciona para a p√°gina de login
}
  </script>

  <script>
    window.onload = function() {
  const username = localStorage.getItem('username');
  
  if (!username) {
    // Se n√£o houver nome de usu√°rio no localStorage, redireciona para a p√°gina de login
    window.location.href = 'login.html';
  } else {
    const users = JSON.parse(localStorage.getItem('users')) || [];
    const user = users.find(user => user.username === username);
    
    if (user) {
      document.getElementById('username-display').textContent = user.username || 'Usu√°rio n√£o encontrado';
      document.getElementById('email-display').textContent = user.email || 'E-mail n√£o encontrado';
      document.getElementById('phone-display').textContent = user.phone || 'Telefone n√£o encontrado';
      document.getElementById('sex-display').textContent = user.sex || 'Sexo n√£o encontrado';
      document.getElementById('password-display').value = user.password || 'Senha n√£o encontrada';
      
      // Exibe o avatar
      const avatarDisplay = document.getElementById('avatar-display');
      if (user.avatar) {
        const avatarImage = user.avatar === 'masculino' ? 'images/Avatar/avatar_masculino.png' : 'images/Avatar/avatar_feminino.png';
        avatarDisplay.innerHTML = `<img src="${avatarImage}" alt="Avatar" width="50" height="50">`;
      } else {
        avatarDisplay.textContent = 'Avatar n√£o selecionado';
      }
    } else {
      document.getElementById('username-display').textContent = 'Usu√°rio n√£o encontrado';
    }
  }
};
  </script>

  <script src="js/script.js"></script>
  <script src="js/theme.js" defer></script>
</body>
</html>
